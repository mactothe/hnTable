<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/androidstudio.min.css">
    <link rel="stylesheet" href="example.css">
    <link rel="stylesheet" class="for-hnTable" href="../hnTable/hnTable.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
    <script src="../hnTable/hnTable.js"></script>
    <script src="sampleData.js"></script>
    <script>
        hljs.highlightAll();
        hljs.initLineNumbersOnLoad();
        window.onload = function (e) {
            let example1 = new HnTable({
                target: "#example1",
                data: sampleData
            });

            let example2 = new HnTable({
                target: "#example2",
                columns: {
                    check: {
                        markText: function () {
                            let allCheckBox = document.createElement("input");
                            allCheckBox.setAttribute("type", "checkbox");
                            allCheckBox.id = "allCheck";
                            allCheckBox.addEventListener("click", function (e) {
                                if (e.target.checked) {
                                    document.querySelectorAll("#example2 .hn-table-row").forEach(function (el) {
                                        if (el.getAttribute("hn-table-row-num")) {
                                            example2.getRowData(el.getAttribute("hn-table-row-num")).check = true;
                                            el.querySelector("[hn-table-column='check'] .rowCheck").checked = true;
                                        }
                                    });
                                } else {
                                    document.querySelectorAll("#example2 [hn-table-column='check'] .rowCheck").forEach(function (el) {
                                        el.checked = false;
                                    });
                                }
                            });
                            return allCheckBox;
                        }, width: 50, format: function (cellValue, rowMap) {
                            rowMap.check = false;

                            let checkboxEl = document.createElement("input");
                            checkboxEl.type = "checkbox";
                            checkboxEl.classList.add("rowCheck");

                            let allCheck = document.querySelector("#allCheck");
                            if (allCheck && allCheck.checked) {
                                checkboxEl.checked = true;
                                rowMap.check = checkboxEl.checked;
                            }
                            checkboxEl.addEventListener("click", function (e) {
                                let allCheckBool = true;
                                if (e.target.checked) {
                                    document.querySelectorAll("#example2 [hn-table-column='check'] .rowCheck").forEach(function (el) {
                                        if (!el.checked) {
                                            allCheckBool = false;
                                        }
                                    });
                                    rowMap.check = true;
                                } else {
                                    allCheckBool = false;
                                    rowMap.check = false;
                                }
                                allCheck.checked = allCheckBool;
                            });
                            return checkboxEl;
                        }
                    },
                    rnum: {markText: "순번", width: 120},
                    newPlatPlc: {markText: "도로명대지위치", width: 300},
                    bldNm: {markText: "건물명", width: 200},
                    bylotCnt: {markText: "외필지수", width: 120},
                    naRoadCd: {markText: "새주소도로코드", width: 120},
                    naBjdongCd: {markText: "새주소법정동코드", width: 120},
                    naUgrndCd: {
                        markText: "새주소지상지하코드", width: 120, format: function (cellValue, rowMap) {
                            return cellValue == 0 ? "지상" : "지하";
                        }
                    },
                    crtnDay: {markText: "생성일자", width: 120},
                    platPlc: {markText: "대지위치", width: 300},
                    sigunguCd: {markText: "시군구코드", width: 120},
                    bjdongCd: {markText: "법정동코드", width: 120},
                    platGbCd: {markText: "대지구분코드", width: 120},
                    bunji: {
                        markText: "번지", width: 120, format: function (cellValue, rowMap) {
                            let bun = Number(rowMap.bun);
                            let ji = Number(rowMap.ji)
                            return ji != 0 ? bun + "-" + ji : bun;
                        }
                    },
                    mgmBldrgstPk: {markText: "관리건축물대장PK", width: 120},
                    mgmUpBldrgstPk: {markText: "관리상위건축물대장PK", width: 120},
                    regstrGbCd: {markText: "대장구분코드", width: 120},
                    regstrGbCdNm: {markText: "대장구분코드명", width: 120},
                    regstrKindCd: {markText: "대장종류코드", width: 120},
                    regstrKindCdNm: {markText: "대장종류코드명", width: 120}
                },
                data: sampleData
            });

            document.querySelector("#checkRowCount").addEventListener("click", function () {
                let checkCnt = 0;
                example2.getColumnData("check").forEach(function (value) {
                    if (value) {
                        ++checkCnt;
                    }
                });
                alert(checkCnt);
            });

            let example3 = new HnTable({
                target: "#example3",
                columns: {
                    rnum: {markText: "순번", width: 120, sortAble: true},
                    newPlatPlc: {markText: "도로명대지위치", width: 300},
                    bldNm: {markText: "건물명", width: 200, sortAble: true},
                    bylotCnt: {markText: "외필지수", width: 120},
                    naRoadCd: {markText: "새주소도로코드", width: 120},
                    naBjdongCd: {markText: "새주소법정동코드", width: 120},
                    naUgrndCd: {markText: "새주소지상지하코드", width: 120},
                    naMainBun: {markText: "새주소본번", width: 120},
                    naSubBun: {markText: "새주소부번", width: 120},
                    crtnDay: {markText: "생성일자", width: 120},
                    platPlc: {markText: "대지위치", width: 300},
                    sigunguCd: {markText: "시군구코드", width: 120},
                    bjdongCd: {markText: "법정동코드", width: 120},
                    platGbCd: {markText: "대지구분코드", width: 120},
                    bun: {markText: "번", width: 120},
                    ji: {markText: "지", width: 120},
                    mgmBldrgstPk: {markText: "관리건축물대장PK", width: 120},
                    mgmUpBldrgstPk: {markText: "관리상위건축물대장PK", width: 120},
                    regstrGbCd: {markText: "대장구분코드", width: 120},
                    regstrGbCdNm: {markText: "대장구분코드명", width: 120},
                    regstrKindCd: {markText: "대장종류코드", width: 120},
                    regstrKindCdNm: {markText: "대장종류코드명", width: 120}
                },
                data: sampleData,
                sortUse: true
            });

            document.querySelectorAll(".styleChangeBtn").forEach(function (el) {
                el.addEventListener("click", function (e) {
                    document.querySelectorAll("link[rel='stylesheet'].for-hnTable").forEach(function (el) {
                        el.remove();
                    })
                    document.querySelector("head").insertAdjacentHTML("beforeend", '<link rel="stylesheet" class="for-hnTable" href="../hnTable/hnTable.css">');
                    if (e.target == document.querySelector("#style2")) {
                        document.querySelector("head").insertAdjacentHTML("beforeend", '<link rel="stylesheet" class="for-hnTable" href="hnTable-custom.css">');
                    } else if (e.target == document.querySelector("#style3")) {
                        document.querySelector("head").insertAdjacentHTML("beforeend", '<link rel="stylesheet" class="for-hnTable" href="hnTable-custom2.css">');
                    }
                });
            });
        };
    </script>
</head>
<body>
    <div style="display: block; width: 100%; margin-bottom: 10px;">
        <button class="styleChangeBtn" id="style1">style 1</button>
        <button class="styleChangeBtn" id="style2">style 2</button>
        <button class="styleChangeBtn" id="style3">style 3</button>
    </div>


    <h1>- Basic setting</h1>
    <pre><code class="language-javascript">    let hnTable = new HnTable({
        target: "#example1"
        data: sampleData
    });</code></pre>
    <div id="example1" style="width: 100%; height: 400px; margin-bottom: 10px;">
    </div>

    <hr style="margin-top: 30px; margin-bottom: 10px;">

    <h1>- Column setting(markText, width, format)</h1>
    <pre><code class="language-javascript">let hnTable = new HnTable({
        target: "#example2",
        columns: {
            check: {
                markText: function () {
                    let allCheckBox = document.createElement("input");
                    allCheckBox.setAttribute("type", "checkbox");
                    allCheckBox.id = "allCheck";
                    allCheckBox.addEventListener("click", function (e) {
                        if (e.target.checked) {
                            document.querySelectorAll("#example2 .hn-table-row").forEach(function (el) {
                                if (el.getAttribute("hn-table-row-num")) {
                                    example2.getRowData(el.getAttribute("hn-table-row-num")).check = true;
                                    el.querySelector("[hn-table-column='check'] .rowCheck").checked = true;
                                }
                            });
                        } else {
                            document.querySelectorAll("#example2 [hn-table-column='check'] .rowCheck").forEach(function (el) {
                                el.checked = false;
                            });
                        }
                    });
                    return allCheckBox;
                }, width: 50, format: function (cellValue, rowMap) {
                    rowMap.check = false;

                    let checkboxEl = document.createElement("input");
                    checkboxEl.type = "checkbox";
                    checkboxEl.classList.add("rowCheck");

                    let allCheck = document.querySelector("#allCheck");
                    if (allCheck && allCheck.checked) {
                        checkboxEl.checked = true;
                        rowMap.check = checkboxEl.checked;
                    }
                    checkboxEl.addEventListener("click", function (e) {
                        let allCheckBool = true;
                        if (e.target.checked) {
                            document.querySelectorAll("#example2 [hn-table-column='check'] .rowCheck").forEach(function (el) {
                                if (!el.checked) {
                                    allCheckBool = false;
                                }
                            });
                            rowMap.check = true;
                        } else {
                            allCheckBool = false;
                            rowMap.check = false;
                        }
                        allCheck.checked = allCheckBool;
                    });
                    return checkboxEl;
                }
            },
            rnum: {markText: "순번", width: 120},
            newPlatPlc: {markText: "도로명대지위치", width: 300},
            bldNm: {markText: "건물명", width: 200},
            bylotCnt: {markText: "외필지수", width: 120},
            naRoadCd: {markText: "새주소도로코드", width: 120},
            naBjdongCd: {markText: "새주소법정동코드", width: 120},
            naUgrndCd: {
                markText: "새주소지상지하코드", width: 120, format: function (cellValue, rowMap) {
                    return cellValue == 0 ? "지상" : "지하";
                }
            },
            crtnDay: {markText: "생성일자", width: 120},
            platPlc: {markText: "대지위치", width: 300},
            sigunguCd: {markText: "시군구코드", width: 120},
            bjdongCd: {markText: "법정동코드", width: 120},
            platGbCd: {markText: "대지구분코드", width: 120},
            bunji: {
                markText: "번지", width: 120, format: function (cellValue, rowMap) {
                    let bun = Number(rowMap.bun);
                    let ji = Number(rowMap.ji)
                    return ji != 0 ? bun + "-" + ji : bun;
                }
            },
            mgmBldrgstPk: {markText: "관리건축물대장PK", width: 120},
            mgmUpBldrgstPk: {markText: "관리상위건축물대장PK", width: 120},
            regstrGbCd: {markText: "대장구분코드", width: 120},
            regstrGbCdNm: {markText: "대장구분코드명", width: 120},
            regstrKindCd: {markText: "대장종류코드", width: 120},
            regstrKindCdNm: {markText: "대장종류코드명", width: 120}
        },
        data: sampleData
    });</code></pre>
    <div id="example2" style="width: 100%; height: 400px; margin-bottom: 10px;">
    </div>
    <div style="display: block; width: 100%; margin-bottom: 10px;">
        <button id="checkRowCount">checkCount</button>
    </div>

    <hr style="margin-top: 30px; margin-bottom: 10px;">

    <div id="example3" style="width: 100%; height: 400px; margin-bottom: 10px;">
    </div>
</body>
</html>


